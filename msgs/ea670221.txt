I started work on the next generation of what the local first community likes to call the "data substrate" for darc. want to share my intermediate results:

- i keep coming back to cleartext files being the only format for agency, longevity and resilience.  this was already relly helpful in darcs export format being text based and versionable but i wanted to see if its possible to take this to the extrme. build a text file mapping for common data formats that is optimized to be in git, diffed, merged and synced like code with code tools. merge conflicts are now solvable with agents so users only have to accept the merge resolution proposal not manually resolve issues which was always the main counter argument for this direction. 
- chrome resolved the previous exsisting performance issues on the folder based file api, making it mostly FASTER than opfs and with support for fs change observables as well as file mtimes possisble to write efficient updating.  as we deal with many small files for the git merged optimized format most benchmarks will not be true that focus on bigger files. for 4500 small  (one calender entry per file) ical files i can read inclusive parse  in ~ 600ms, deno multi worker can do 160ms as comparison, opfs is about ~800ms this is initial ingestion, sync after can be of course near instant because of wather and occasional mtime fullsync. 
- unfortunately the bottleneck seems to be efficiently crunching and parsing text from the data into a view model optimised for app use, which still can take up to 2 seconds for complex data. even with proper space partitioning this would result in app start times for darc of 1 to 2 seconds more than i would like leading me to abandon the naive approach to have only a text format with in memory indexing.
- i still believe that the source of truth should be text files but also without sacrificing ux, so im now investigating best options to have persistent indices, effectively giving best of both worlds.

next: i set up pouchdb idb, indexeddb, sqlite async access handle and sqlite sahpool (tursoDB rust is too early and does not support workers)   for comparison.

if anyone has a solution i should add to the benchmark please ping me